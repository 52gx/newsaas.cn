<html lang="en">
<head>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width,maximum-scale=1.0,minimum-scale=1.0'>
  <meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <title>国庆红旗头像 - 新云网络</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
  <style>
    a:link{color:#fff;text-decoration: none;}
    a:visited{color:#fff;}
    #export{display:none;margin:0 auto;width:250px;height:250px;margin-top:50px;margin-bottom:50px}
    .operation-btns .o-btn1{background-size:11.6rem 4.325rem}
    .operation-btns .o-btn2{background-size:11.6rem 3.75rem}
    center{color: #fff;}
  </style>
  <link rel="stylesheet" type="text/css" href="css/strap.min.css">
</head>
<body>
  <div class="wrapper">
    <img src="" alt="" class="img-load" style="width: 9.5rem; position: fixed; top: 0px; left: -9999px;">
    <div class="operation-header">
      <div class="h-title">

      </div>
    </div>
    <div class="operation-box">
      <a class="prev" onClick='changeHat()'></a>
      <div class="operation-img">
        <div class="cropper-content" id="content">
          <canvas class="" id='cvs'></canvas>
        </div>
      </div>
      <a class="next" onClick='changeHat()'></a>
    </div>
    <img id='export' alt='国庆专属头像' src='' />
    <div class="operation-btns">
      <a class="o-btn1">
        <input class="o-btn1" id='upload' type='file' onchange='viewer()' style='opacity: 0;'>
      </a>
      <a class="o-btn2" onClick='exportFunc()' style="display: none;">
      </a>
    </div>

    <div class="operation-done">
      <img src="img/act-done-happy.png" alt="" class="act-done-happy">
    </div>
    <center>
<p class="text-center">©&nbsp;2020 - 2021&nbsp;&nbsp;API
                <b style="color: #ff4425;">♥</b>
                 <a href="http://newsaas.cn/" title="AEINK" rel="link" target="_blank">新云网络</a>
      <!-- <a href="http://newsaas.cn/" target="_blank">黑科技Get</a> -->
    </center>
  </div>
  <div style='display: none'>
    <img id='img' src='' alt='' />
    <img class='hide' id='hat0' src='img/hat7.png' />
    <img class='hide' id='hat1' src='img/hat0.png' />
    <img class='hide' id='hat2' src='img/hat2.png' />
    <img class='hide' id='hat3' src='img/hat3.png' />
    <img class='hide' id='hat4' src='img/hat1.png' />
    <img class='hide' id='hat5' src='img/hat4.png' />
    <img class='hide' id='hat6' src='img/hat5.png' />
    <img class='hide' id='hat7' src='img/hat6.png' />
  </div>
<script>
  var cvs = document.getElementById("cvs");
  var ctx = cvs.getContext("2d");
  var exportImage = document.getElementById("export");
  var img = document.getElementById("img");
  var hat = "hat0";
  var canvasFabric;
  var hatInstance;
  //var screenWidth = window.screen.width < 500 ? window.screen.width : 300;
  var screenWidth = document.getElementById("content").scrollHeight;
  function viewer() {
    var file = document.getElementById("upload").files[0];
    console.log(file);
    var reader = new FileReader;
    if (file) {
      reader.readAsDataURL(file);
      reader.onload = function(e) {
        img.src = reader.result;
        img.onload = function() {
          img2Cvs(img)
        }
      }
    } else {
      img.src = ""
    }
  }
  function img2Cvs(img) {
    cvs.width = img.width;
    cvs.height = img.height;
    cvs.style.display = "block";
    canvasFabric = new fabric.Canvas("cvs", {
      width: screenWidth,
      height: screenWidth,
      backgroundImage: new fabric.Image(img, {
        scaleX: screenWidth / img.width,
        scaleY: screenWidth / img.height
      })
    });
    changeHat();

    document.getElementsByClassName("o-btn1")[0].style.display = "none";
    document.getElementsByClassName("o-btn2")[0].style.display = "block";
    //document.getElementById("tip").style.opacity = 1
  }
  function changeHat() {
    document.getElementById(hat).style.display = "none";
    var hats = document.getElementsByClassName("hide");
    hat = "hat" + (+hat.replace("hat", "") + 1) % hats.length;
    var hatImage = document.getElementById(hat);
    hatImage.style.display = "block";
    if (hatInstance) {
      canvasFabric.remove(hatInstance)
    }
    console.log(hatImage.width);
    console.log(100 / hatImage.width);
    hatInstance = new fabric.Image(hatImage, {
      top: 0,
      left: 0,
      scaleX: screenWidth / hatImage.width,
      scaleY: screenWidth / hatImage.height,
      cornerColor: "#0b3a42",
      cornerStrokeColor: "#fff",
      cornerStyle: "circle",
      transparentCorners: false,
      rotatingPointOffset: 30
    });
    hatInstance.setControlVisible("bl", false);
    hatInstance.setControlVisible("tr", false);
    hatInstance.setControlVisible("tl", false);
    hatInstance.setControlVisible("mr", false);
    hatInstance.setControlVisible("mt", false);
    canvasFabric.add(hatInstance)
  }
  function exportFunc() {
    document.getElementsByClassName("operation-box")[0].style.display = "none";
    document.getElementsByClassName("operation-btns")[0].style.display = "none";

    /*document.getElementById("exportBtn").style.display = "none";
    document.getElementById("tip").innerHTML = "长按图片保存或分享";
    document.getElementById("change").style.display = "none";*/
    cvs.style.display = "none";
    exportImage.style.display = "block";
    exportImage.src = canvasFabric.toDataURL({
      width: screenWidth,
      height: screenWidth
    });
    alert('长按图片保存或分享');
  }
</script>
<script>
                console.log("%c页面加载耗时：30ms | Theme By newsaas.cn", "color:#fff; background: linear-gradient(270deg, #986fee, #8695e6, #68b7dd, #18d7d3); padding: 8px 15px; border-radius: 0 15px 0 15px");
    </script>


<script type="text/javascript" src="usr/plugins/AliceStyle/static/js/bg/b5.js"></script>				<script>
				let leftHeader=document.querySelectorAll("span.nav-icon>svg,span.nav-icon>i");let leftHeaderColorArr=["#86d2f3","#a3dbf3","#5dbde7","#6b7ceb","#919ff5","#abb6f5"];leftHeader.forEach(tag=>{tagsColor=leftHeaderColorArr[Math.floor(Math.random()*leftHeaderColorArr.length)];tag.style.color=tagsColor});	
				</script>				<script>
				  
				      let tags = document.querySelectorAll("#tag_cloud-2 a,.list-group-item .pull-right");
				      
                      let colorArr = ["#86d2f3", "#a3dbf3", "#5dbde7", "#6b7ceb", "#919ff5", "#abb6f5"];
                      
                      tags.forEach(tag =>{
                          tagsColor = colorArr[Math.floor(Math.random() * colorArr.length)];
                          tag.style.backgroundColor = tagsColor
                      });
                      
				</script><div class="back-to-top cd-top faa-float animated cd-is-visible" style="top: -900px;"></div><script type="text/javascript" src="usr/plugins/AliceStyle/static/js/app/szgotop.js"></script><canvas id="fireworks" style="position:fixed;left:0;top:0;pointer-events:none;z-index:999999999999;"></canvas><script>				$("body").css("cursor", "url('usr/plugins/AliceStyle/static/mouse/fireworks/normal.cur'), default");
				$("a").css("cursor", "url('usr/plugins/AliceStyle/static/mouse/fireworks/link.cur'), pointer");</script><script type="text/javascript" src="usr/plugins/AliceStyle/static/libs/anime.min.js"></script><script type='text/javascript' src='usr/plugins/AliceStyle/static/js/app/fireworks.js'></script><script type="text/javascript" src="usr/plugins/AliceStyle/static/js/app/as-tool.js"></script><script type="text/javascript" src="usr/plugins/AliceStyle/static/js/app/as-style.js"></script><script>console.log("\n %c AliceStyle v3.4.0 Pro By 新云网络 | https://newsaas.cn","color:#fff;background: linear-gradient(to right , #7A88FF, #9ba5ff);padding:5px;border-radius: 10px;");</script>	</div>
</body>
<script type="text/javascript">
var tx=new Array("欢迎访问国庆头像生成","本站免费生成国庆红旗头像","持续为你更新……","等你的探索哦！","谢谢访问");
var txcount=4;
var i=1;
var wo=0;
var ud=1;
function animatetitle()
{
window.document.title=tx[wo].substr(0,i)+"";
if(ud==0)i--;
if(ud==1)i++;
if(i==-1){ud=1;i=0;wo++;wo=wo%txcount;}
if(i==tx[wo].length+10){ud=0;i=tx[wo].length;}
parent.window.document.title=tx[wo].substr(0,i)+"";
setTimeout("animatetitle()",100);
}
animatetitle();
</script>

<style>
.float-radius{-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;}
.float-text{color:#1E90FF}
.float-box{width:50px;font-size:12px;position:fixed;right:0;bottom:0;z-index:9997;}
.float-ul,.float-ul li{margin:0;padding:0;}
.float-ul{margin-top:5px;text-align:center;line-height:1.2;list-style:none;background-color:#FFF;box-shadow:0 2px 5px #e6e6e6;}
.float-ul .iconfont{font-size:18px;line-height:18px;}
.float-ul li a{display:block;width:100%;padding:10px 0;line-height:18px;}
.float-ul li a:hover{background:linear-gradient(-125deg,
#00BFFF 0%,
#00BFFF 100%);box-shadow:0 8px 10px rgba(32,160,255,.3);color:#FFF;}
.float-ul li a.qq{-moz-border-top-left-radius:4px;-moz-border-top-right-radius:4px;border-top-left-radius:4px;border-top-right-radius:4px;position:relative;}
.float-alert-box{width:180px;height:185px;background-color:#FFF;border:1px solid #ececec;position:absolute;right:56px;top:0;z-index:9998;display:none;}
.float-qq-box{padding:20px 15px;}
.float-alert-box h6{font-size:20px;color:#f9b015;}
.float-alert-box p{line-height:24px;}
.float-ul li .float-qq-box{color:#666;}
.float-qq-btn{padding:10px;background-color:#f9b015;color:#FFF;}
</style>
	<img src="img/China.png" style="width:99px;right:0px;position:fixed;bottom:0px;" /><!-- 右下角国旗 -->
      </div>
		<script src="js/index.js"></script><!-- 核心插件 -->
	    <script src="js/all.js"></script><!-- 图标库 -->
		<script src="js/fabric.min.js"></script>
        <script src="js/love.js"></script>
 <script>
 <!--禁止审查代码start-->
<script type="text/javascript">
		//判断F12审查元素
function fuckyou() {
	window.close(); //关闭当前窗口(防抽)
	window.location = "about:blank"; //将当前窗口跳转置空白页
}

function ck() {
	console.profile();
	console.profileEnd();
	//我们判断一下profiles里面有没有东西，如果有，肯定有人按F12了，没错！！
	if(console.clear) {
		console.clear()
	};
	if(typeof console.profiles == "object") {
		return console.profiles.length > 0;
	}
}

function hehe() {
	if((window.console && (console.firebug || console.table && /firebug/i.test(console.table()))) || (typeof opera == 'object' && typeof opera.postError == 'function' && console.profile.length > 0)) {
		fuckyou();
	}
	if(typeof console.profiles == "object" && console.profiles.length > 0) {
		fuckyou();
	}
}
hehe();
window.onresize = function() {
	if((window.outerHeight - window.innerHeight) > 200)
		//判断当前窗口内页高度和窗口高度，如果差值大于200，那么呵呵
		fuckyou();
}
</script>
<!--禁止审查代码end-->
<!--客服 开始-->
<script src="https://cdn.jsdelivr.net/gh/1000gcc/1000gcc.github.io@master/kefu/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/1000gcc/1000gcc.github.io@master/kefu/kefu.css" type="text/css" media="screen" charset="utf-8">
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/1000gcc/1000gcc.github.io@master/kefu/kefu.js"></script>
<!-- 客服 结束 -->
<audio autoplay="autoplay"><source src="http://music.163.com/song/media/outer/url?id=487587201.mp3" type="audio/mpeg"></audio>
<!-- <audio autoplay="autoplay"><source src="https://cdn.jsdelivr.net/gh/1000gcc/1000gcc.github.io@master/static/bg.mp3" type="audio/mpeg"></audio> -->
<script>
!function(p){"use strict";!function(t){var s=window,e=document,i=p,c="".concat("https:"===e.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=e.createElement("script"),r=e.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=c,n.id="LA_COLLECT",i.d=n;var o=function(){s.LA.ids.push(i)};s.LA?s.LA.ids&&o():(s.LA=p,s.LA.ids=[],o()),r.parentNode.insertBefore(n,r)}()}({id:"JOrwpdHrWv1k2sjL",ck:"JOrwpdHrWv1k2sjL"});
</script>
</html>